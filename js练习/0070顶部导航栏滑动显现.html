<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>滑动导航栏显现</title>
	<style type="text/css">
	*{
		margin: 0;
		padding: 0;
	}
		#nav{
			width: 100%;
			height: 100px;
			background: blue;
		}
		#topNav{
			width: 100%;
			height: 100px;
			background: red;
			position: fixed;
			top:0;
		}
        #main{
        	width: 100%;
        	height: 3000px;
        }
	</style>
	<script type="text/javascript">
          function animation(obj,attr,iTarget){
          	clearInterval(obj.timer);
          	obj.timer=setInterval(function(){
          		var iSpeed=0;
          		
          		var curr=parseFloat(getComputedStyle(obj,false)[attr]);
          if(attr=='opacity'){
          			curr=curr*100;
          		}
          		if(curr>iTarget){
          			iSpeed=-20;
          		}else{
          			iSpeed=20;
          		}
          		if(Math.abs(iTarget-curr)<=Math.abs(iSpeed)){
          			  clearInterval(obj.timer);
          			  if(attr=='opacity'){
          			  	obj.style[attr]=iTarget/100;
          			  }else{
          			  	obj.style[attr]=iTarget+'px';
          			  	}
                 }else{
          			if(attr=='opacity'){
          				obj.style[attr]=(curr+iSpeed)/100;
          			}else{
          			   obj.style[attr]=curr+iSpeed+'px';
          			}		
          		 }
          	},30);
          }
            var isShow=false;
		window.onscroll=function(){
			var oDiv=document.getElementById('topNav');
			var oMain=document.getElementById('main')
			var iTop=document.body.scrollTop||document.documentElement.scrollTop;
			// console.log('iTop'+iTop)
               if(iTop>=100){
               	// oDiv.style.height='100px';
               	if(!isShow){
               		animation(oDiv,'height',100);
               		isShow=true;
               		oMain.style.marginTop='100px';
               		console.log('in::::')
               	}  
               }else{
               	// oDiv.style.height='0px';
               	if(isShow){
               	    animation(oDiv,'height',0);
               	    oMain.style.marginTop='0px';
               	    isShow=false;
               	}
             }
	      }	
	</script>
</head>
<body>
	<div id="nav"></div>
	<div id="topNav"></div>
	<div id="main">
		11111<br>
		22222<br>
		33333<br>
	</div>
</body>
</html>