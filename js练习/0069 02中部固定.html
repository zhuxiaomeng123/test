<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>js实现中部定位</title>
	<style type="text/css">
	*{
		margin: 0;
		padding: 0;
	}
	body{
		height: 3000px;
	}
		#div{
			width: 100px;
			height: 100px;
			background: red;
			position: absolute;
			/*position: fixed;*/
			/*bottom: 0;*/
			right: 0;
		}
	</style>
	<script type="text/javascript">

          function animation(obj,attr,iTarget){
          	clearInterval(obj.timer);
          	obj.timer=setInterval(function(){
          		var iSpeed=0;
          		
          		var curr=parseFloat(getComputedStyle(obj,false)[attr]);
          if(attr=='opacity'){
          			curr=curr*100;
          		}
          		if(curr>iTarget){
          			iSpeed=-50;
          		}else{
          			iSpeed=50;
          		}
          		if(Math.abs(iTarget-curr)<=Math.abs(iSpeed)){
          			  clearInterval(obj.timer);
          			  if(attr=='opacity'){
          			  	obj.style[attr]=iTarget/100;
          			  }else{
          			  	obj.style[attr]=iTarget+'px';
          			  	}
                 }else{
          			if(attr=='opacity'){
          				obj.style[attr]=(curr+iSpeed)/100;
          			}else{
          			   obj.style[attr]=curr+iSpeed+'px';
          			}		
          		 }
          	},30);
          }

		window.onresize=window.onscroll=window.onload=function(){
			var oDiv=document.getElementById('div');
			var iHeight=window.innerHeight;
			var iTop=document.body.scrollTop||document.documentElement.scrollTop;
			// oDiv.style.top=iTop+iHeight-oDiv.offsetHeight+'px';
			// console.log(iHeight+'##'+iTop);
			var iTarget=iTop+(iHeight-oDiv.offsetHeight)/2;
			animation(oDiv,'top',iTarget)
		}
	</script>
</head>
<body>
	<div id="div"></div>
</body>
</html>