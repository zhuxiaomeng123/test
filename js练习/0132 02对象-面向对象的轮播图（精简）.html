<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>对象-面向对象的轮播图</title>
	<style type="text/css">
		*{
			margin: 0;
			padding: 0;
		}
		li{
			list-style: none;
		}
		.leftBtn,.rightBtn{
			width: 30px;
			height: 30px;
			line-height: 30px;
			text-align: center;
			background: rgba(0,0,0,0.5);
			color: #fff;
			font-size: 20px;
			position: absolute;
			top:50%;
			margin-top: -15px;
			cursor:pointer;
		}
		.leftBtn{
               left: 0;
		}
		.rightBtn{
           right: 0;
		}
		.bottomBtn{
			position: absolute;
			bottom: 10px;
			left: 50%;
		}
		.bottomBtn li{
			width: 20px;
			height: 20px;
			background: rgba(0,0,0,0.5);
			float: left;
			margin-right: 10px;
			border-radius: 50%;
			cursor: pointer;
		}
		.bottomBtn li.active{
             background: green;
		}
	</style>
</head>
<body>
	<div id="div1"></div>
</body>
<script type="text/javascript">
	function Carousel(option){
		//罗列属性
		//获取容器
		this.oBox=document.getElementById(option.id);
		this.oImgUl=null;
		this.aImg=option.aImg;
		this.width=option.width;
		this.height=option.height;
		this.leftBtn=null;
		this.rightBtn=null;
		this.oBttomBtn=null;
		this.now=0;
		//初始化
		this.init();
		//绑定事件
		this.bindEvent();

		if(this.playDuration){
			this.autoPlay();
		}
	}




	Carousel.prototype.init=function(){
		//创建放图片的ul容器
		this.oBox.style.width=this.width+'px';
		this.oBox.style.height=this.height+'px';
		this.oBox.style.position='relative';
		this.oImgUl=document.createElement('ul');
		for(var i=0;i<this.aImg.length;i++){
			var oLi=document.createElement('li');
             var oImg=document.createElement('img');
             oLi.style.position='absolute';
             oLi.style.top=0;
             oLi.style.left=0;
             //默认显示第一张
             if(i==0){
             oLi.style.opacity=1;
             oLi.style.zIndex=50;            	
             }else{
             oLi.style.opacity=0.5;
             oLi.style.zIndex=0;             	
             }
             oImg.style.width=this.width+'px';
             oImg.style.height=this.height+'px';
             oImg.src=this.aImg[i];
             oLi.appendChild(oImg);
			this.oImgUl.appendChild(oLi);
		}




		//左右按钮
		this.leftBtn=document.createElement('span');
		this.rightBtn=document.createElement('span');
         this.leftBtn.className='leftBtn'; 
         this.rightBtn.className='rightBtn'; 
         this.leftBtn.style.zIndex=999;
         this.rightBtn.style.zIndex=999;
         this.leftBtn.innerHTML="&lt;"
         this.rightBtn.innerHTML="&gt;"
         //底部按钮
         this.oBttomBtn=document.createElement('ul');
         this.oBttomBtn.className='bottomBtn';
          this.oBttomBtn.style.zIndex=999;
         for(var i=0;i<this.aImg.length;i++){
         	var oLi=document.createElement('li');
             if(i==0){
             	oLi.className='active';
             }
         	this.oBttomBtn.appendChild(oLi);
         }




		//把按钮添加到顶层父容器中
		this.oBox.appendChild(this.leftBtn);
		this.oBox.appendChild(this.rightBtn);
		
		this.oBox.appendChild(this.oBttomBtn);
		//给底部按钮添加marginLeft使其水平居中
		this.oBttomBtn.style.marginLeft=-this.oBttomBtn.offsetWidth*0.5+'px';

		//把ul容器添加到顶层父容器
		this.oBox.appendChild(this.oImgUl);
	}




	Carousel.prototype.bindEvent=function(){
		//显示下一张

		      this.rightBtn.onclick=function(){
               this.now++;
               if(this.now>=this.oImgUl.children.length){
           	   this.now=0;
               }
                this.tab();

		       }.bind(this);


		//显示上一张
			this.leftBtn.onclick=function(){
               this.now--;
               if(this.now<0){
              	this.now=this.oImgUl.children.length-1;
               }
               this.tab();
		  }.bind(this);



   Carousel.prototype.tab=function(){
           // 改变所有的li
               for(var i=0;i<this.oImgUl.children.length;i++){
           	   this.oImgUl.children[i].style.zIndex=0;
           	   this.oImgUl.children[i].style.opacity=0.5;
           	   this.oBttomBtn.children[i].className='';
                }
             //改变当前的Li
           this.oImgUl.children[this.now].style.zIndex=50;
           this.oImgUl.children[this.now].style.opacity=1;
           this.oBttomBtn.children[this.now].className='active';
		   }.bind(this);
	}




	new Carousel({
		id:'div1',
		aImg:[
		'images/jd01.jpg',
		'images/jd02.jpg',
		'images/jd03.jpg',
		'images/jd04.jpg'
		],
		width:790,
		height:340,
	    });
</script>
</html>