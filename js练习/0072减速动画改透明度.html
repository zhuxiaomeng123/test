<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>减速动画改透明度</title>
<style type="text/css">
	*{
		margin: 0;
		padding: 0;
	}
		#box{
			width: 100px;
			height: 100px;
			background: red;
			position: absolute;
			left:600px;
			top:100px;
			opacity: 1;
		}
		#line{
			width: 1px;
			height: 800px;
			background: black;
			position: absolute;
			top:0;
			left: 300px;
		}
	</style>
	<script type="text/javascript">
		  var timer=null;
		function animation(obj,attr,iTarget){
		    		clearInterval(timer);
		    		timer=setInterval(function(){
		    			var curr=parseFloat(getComputedStyle(obj,false)[attr]); 
		    			if(attr=='opacity'){
		    				curr=Math.round(curr*100);  
		    			} 
                       var iSpeed=(iTarget-curr)/10;
                       iSpeed=iSpeed>0 ? Math.ceil(iSpeed):Math.floor(iSpeed);/*三木运算符*/
                       if(!iSpeed){
                       	// if(300=oBox.offsetLeft){
                       	clearInterval(timer)
                       }else{
                       	if(attr=='opacity'){
                       	obj.style[attr]=(curr+iSpeed)/100;
                       }else{
                       		obj.style[attr]=curr+iSpeed+'px';
                       }
                   }
                       console.log(iSpeed)
		    		},30);
		          }
		    window.onload=function(){
		    	var oBtn=document.getElementById('btn');
		    	var oBox=document.getElementById('box');
		    	
		    	oBtn.onclick=function(){
		    		// oBox.style.left='300px';
                      animation(oBox,'opacity',50);
                      // animation(oBox,'height',500);
		    	}
		    }
	</script>
</head>
<body>
	<input type="button" value="启动按钮" id="btn">
	<div id="box"></div>
	<div id="line"></div>
</body>
</html>